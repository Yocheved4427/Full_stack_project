<div class="page-wrapper">
  <!-- Top Header Bar -->
  <div class="top-header">
    <div class="animated-text-container">
      <div class="animated-text">
        <span>Dreams escapes Dreams escapes Dreams escapes Dreams escapes Dreams escapes Dreams escapes</span>
      </div>
    </div>
    <div class="header-icons">
      <button class="icon-button cart-icon-wrapper" title="Shopping Cart" (click)="navigateToCart()">
        <i class="pi pi-shopping-cart"></i>
        <span class="cart-badge" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
      </button>
      <button class="icon-button" title="User Profile" (click)="goToRegister()">
        <i class="pi pi-user"></i>
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="page-layout">
    <app-filters 
      [totalItems]="totalItems" 
      [pageSize]="pageSize" 
      [currentPage]="currentPage"
      (filtersChanged)="onFiltersChanged($event)"
      (pageChanged)="onPageChange($event)">
    </app-filters>

    <div class="products-section">
      <div class="products-grid">
        <app-product-card 
            *ngFor="let p of paginatedProducts; trackBy: trackByProductId" 
            [product]="p" 
            (addToCartClick)="openQuickView(p)">
        </app-product-card>
      </div>

      <div *ngIf="!isLoading && displayProducts.length === 0" class="no-products">
        <i class="pi pi-inbox" style="font-size: 3rem; color: #ccc;"></i>
        <p>No products found.</p>
      </div>
      
      <div *ngIf="isLoading" class="no-products">
        <i class="pi pi-spin pi-spinner" style="font-size: 3rem; color: #667eea;"></i>
        <p>Loading products...</p>
      </div>
    </div>
  </div>
</div>

<app-product-quick-view 
  *ngIf="selectedProduct && displayDialog"
  [(visible)]="displayDialog" 
  [product]="selectedProduct"
  (cartUpdated)="updateCartCount()">
</app-product-quick-view>